<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <title>AI Silence Remove Website - Best Silent Part Remove Tool</title>
  
  <meta name="description" content="Use this Free Silence Remove Website to automatically remove silent parts from MP3 & WAV. The Best Silent Part Remove tool with AI Audio Enhancer." />
  
  <meta name="keywords" content="Ai silence remove website, audio silenc part remove, silence remove part, free silence remove website, best silent part remove, automatic silence remover, audio trimmer online" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/lamejs@1.2.1/lame.min.js"></script>
  <style>
    :root {
      --neon-cyan: #00f3ff;
      --neon-purple: #bc13fe;
      --bg-deep: #050505;
      --panel-bg: rgba(10, 10, 16, 0.90);
      --border-color: rgba(0, 243, 255, 0.2);
      --text-main: #e0f7fa;
      --text-muted: #56697a;
    }
    body {
      margin: 0;
      font-family: 'Space Grotesk', sans-serif;
      background-color: var(--bg-deep);
      background-image: 
        linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
      color: var(--text-main);
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    /* Top Banner */
    .top-banner {
      width: 100%;
      background: rgba(0, 0, 0, 0.9);
      border-bottom: 1px solid var(--neon-cyan);
      box-shadow: 0 0 10px rgba(0, 243, 255, 0.1);
      padding: 10px 0;
      position: relative;
      z-index: 10;
    }
    .marquee-container { overflow: hidden; white-space: nowrap; display: flex; align-items: center; }
    .marquee-content {
      display: inline-block; white-space: nowrap;
      animation: scroll-left 30s linear infinite;
      font-family: 'Orbitron', sans-serif; font-weight: 400; font-size: 0.75rem;
      letter-spacing: 4px; color: var(--neon-cyan); text-transform: uppercase;
    }
    @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    
    /* AD CONTAINER */
    .ad-container {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px 0;
        z-index: 5;
        min-height: 70px;
        overflow: hidden;
    }
    .ad-frame { max-width: 100vw; overflow: hidden; border: none; }
    
    /* Main Card */
    .container {
      margin-top: 10px;
      width: 90%;
      max-width: 850px;
      position: relative;
      z-index: 2;
      margin-bottom: 10px;
    }
    .card {
      background: var(--panel-bg);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: 16px;
      padding: 30px;
      position: relative;
      box-shadow: 0 20px 50px -10px rgba(0,0,0,0.8);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* FUTURISTIC BORDER */
    .card::before {
        content: "";
        position: absolute;
        inset: -2px;
        z-index: -1;
        border-radius: 18px;
        background: linear-gradient(135deg, var(--neon-cyan), transparent 30%, transparent 70%, var(--neon-purple));
        background-size: 200% 200%;
        animation: border-flow 6s ease infinite;
        opacity: 0.8;
    }
    .card::after {
        content: "";
        position: absolute;
        inset: 0;
        z-index: -2;
        border-radius: 16px;
        box-shadow: 0 0 40px rgba(0, 243, 255, 0.05); 
    }
    @keyframes border-flow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    /* TABS */
    .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
        padding-bottom: 15px;
    }
    .tab-btn {
        background: rgba(0, 0, 0, 0.3);
        color: var(--text-muted);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 12px 10px;
        cursor: pointer;
        font-family: 'Orbitron', sans-serif;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-radius: 4px;
        transition: all 0.3s;
        flex: 1;
        text-align: center;
        clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
    }
    .tab-btn.active {
        background: rgba(0, 243, 255, 0.1);
        color: var(--neon-cyan);
        border-color: var(--neon-cyan);
        box-shadow: 0 0 15px rgba(0, 243, 255, 0.15);
    }
    .tab-content { display: none; animation: fadeIn 0.4s ease-out; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    h2 {
      font-family: 'Orbitron', sans-serif;
      text-align: center;
      font-size: 1.4rem;
      margin: 0 0 10px 0;
      letter-spacing: 2px;
      color: #fff;
      text-transform: uppercase;
      text-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
    }
    p.subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 20px;
      font-size: 0.75rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    /* Controls */
    label {
      color: var(--neon-cyan);
      font-family: 'Orbitron', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 8px;
      display: block;
    }
    .file-upload-wrapper { position: relative; margin-bottom: 20px; }
    input[type="file"] {
      width: 100%; padding: 15px; background: rgba(0,0,0,0.6);
      border: 1px solid #333; border-radius: 8px;
      color: #fff; cursor: pointer; box-sizing: border-box;
      transition: all 0.3s ease; font-family: 'Space Grotesk', sans-serif;
      font-size: 0.8rem;
    }
    input[type="file"]:hover { border-color: var(--neon-purple); }
    input[type="file"]::file-selector-button {
      background: #111; border: 1px solid var(--neon-cyan); color: var(--neon-cyan);
      padding: 6px 12px; border-radius: 4px; margin-right: 10px;
      cursor: pointer; font-weight: 700; text-transform: uppercase; font-family: 'Orbitron', sans-serif;
    }

    .controls-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .input-box {
      background: rgba(0,0,0,0.4); padding: 12px; border-radius: 8px;
      border: 1px solid #333;
    }
    input[type="number"], select {
      width: 100%; background: transparent; border: none;
      border-bottom: 1px solid #444; color: #fff;
      font-family: 'Space Grotesk', sans-serif; font-size: 1.1rem;
      padding: 5px 0; outline: none;
    }
    select option { background: #000; color: #fff; }
    
    /* Buttons */
    .action-area { margin-top: 30px; display: flex; gap: 10px; flex-wrap: wrap; }
    button, .download-btn {
      flex: 1; padding: 14px 20px; border: none; 
      background: linear-gradient(90deg, #1a1a1a, #2a2a2a);
      border: 1px solid var(--neon-cyan);
      color: var(--neon-cyan); 
      font-family: 'Orbitron', sans-serif; font-weight: 700;
      font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;
      cursor: pointer; transition: all 0.3s; text-align: center; text-decoration: none;
      display: inline-flex; align-items: center; justify-content: center; min-width: 120px;
      clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
    }
    button:hover:not(:disabled), .download-btn:hover { 
        background: var(--neon-cyan); color: #000; box-shadow: 0 0 20px rgba(0, 243, 255, 0.4); 
    }
    button:disabled { background: #111; border-color: #333; color: #444; cursor: not-allowed; box-shadow: none; }
    
    .download-btn { border-color: var(--neon-purple); color: var(--neon-purple); display: none; }
    .download-btn:hover { background: var(--neon-purple); color: #fff; }
    .download-btn-mp3 { border-color: #f59e0b; color: #f59e0b; display: none; }
    .download-btn-mp3:hover { background: #f59e0b; color: #000; }
    
    h4 { font-family: 'Orbitron', sans-serif; font-size: 0.75rem; color: #fff; margin-top: 25px; text-transform: uppercase; letter-spacing: 2px; border-left: 3px solid var(--neon-cyan); padding-left: 10px; margin-bottom: 10px; }
    .log-box { margin-top: 20px; padding: 12px; border-radius: 4px; background: #000; border: 1px solid #222; font-family: 'Courier New', monospace; color: var(--neon-cyan); font-size: 0.75rem; min-height: 20px; }
    
    /* Visualizer */
    .visualizer-container { margin-top: 5px; background: rgba(0,0,0,0.6); border-radius: 8px; padding: 10px; border: 1px solid #222; }
    canvas { width: 100%; height: 60px; display: block; border-bottom: 1px solid rgba(0, 243, 255, 0.1); margin-bottom: 5px; }
    audio { width: 100%; height: 30px; opacity: 0.8; border-radius: 4px; filter: invert(1) hue-rotate(180deg); margin-top: 5px; }
    
    /* Hidden Result Section */
    .result-section { display: none; animation: fadeIn 0.5s; }
    
    .seo-content { width: 90%; max-width: 800px; margin: 40px auto; padding: 30px; background: rgba(0,0,0,0.5); border-radius: 16px; border: 1px solid #222; color: #94a3b8; font-size: 0.9rem; line-height: 1.6; }
    .seo-content h1, .seo-content h2, .seo-content h3 { color: #fff; font-family: 'Orbitron', sans-serif; margin-top: 20px; }
  </style>
</head>
<body>

  <!-- TOP BANNER START -->
  <div class="top-banner">
    <div class="marquee-container">
      <div class="marquee-content">
        SYSTEM ONLINE &nbsp; /// &nbsp; AUDIO PROCESSING UNIT &nbsp; /// &nbsp; NO DATA UPLOADED &nbsp; /// &nbsp; SECURE CONNECTION &nbsp; /// &nbsp; AI ENGINE READY &nbsp; /// &nbsp;
      </div>
    </div>
  </div>
  <!-- TOP BANNER END -->

  <!-- TOP AD START -->
  <div class="ad-container">
    <iframe class="ad-frame"
      title="Advertisement"
      width="468" 
      height="60" 
      frameborder="0" 
      scrolling="no"
      sandbox="allow-scripts allow-same-origin allow-popups"
      srcdoc="
        <html>
        <body style='margin:0;padding:0;background:transparent;display:flex;justify-content:center;align-items:center;'>
          <script type='text/javascript'>
            atOptions = {
              'key' : '0687be625f914b80ea92d3d54a2618ce',
              'format' : 'iframe',
              'height' : 60,
              'width' : 468,
              'params' : {}
            };
          </script>
          <script type='text/javascript' src='//www.highperformanceformat.com/0687be625f914b80ea92d3d54a2618ce/invoke.js'></script>
        </body>
        </html>
      ">
    </iframe>
  </div>
  <!-- TOP AD END -->

  <main class="container">
    <h1 style="display:none;">Ai silence remove website - Best silent part remove Tool</h1>
    <div class="card">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('silence')">Silence Remover</button>
            <button class="tab-btn" onclick="switchTab('enhance')">Audio Enhancer</button>
        </div>

        <div id="tab-silence" class="tab-content active">
            <h2>Silent Remover Pro</h2>
            <p class="subtitle">Remove Dead Air & Silence Automatically</p>
            <div class="file-upload-wrapper">
                <label>Input Source File (MP3/WAV)</label>
                <input id="fileSilence" type="file" accept="audio/*" />
            </div>
            
            <div id="silenceOriginalSection" style="display:none;">
                <h4>Original Audio (Before)</h4>
                <div class="visualizer-container">
                    <audio id="audioSilenceIn" controls crossorigin="anonymous"></audio>
                </div>
            </div>

            <div class="controls-grid" style="margin-top:20px;">
                <div class="input-box">
                    <label>Min Silence (Sec)</label>
                    <input id="minSilence" type="number" step="0.05" value="0.1" min="0.0" />
                    <small>Duration to be cut</small>
                </div>
                <div class="input-box">
                    <label>Threshold (RMS)</label>
                    <input id="threshold" type="number" step="0.0" value="0.010" min="0.00001" />
                    <small>Sensitivity</small>
                </div>
            </div>
            <div class="action-area">
                <button id="processSilence">INITIALIZE CUT</button>
            </div>
            <div id="logSilence" class="log-box"><small>> AWAITING INPUT...</small></div>
            
            <div id="silenceResultSection" class="result-section">
                <h4>Processed Voice (Result)</h4>
                <div class="visualizer-container">
                    <canvas id="canvasSilence"></canvas>
                    <audio id="audioSilenceOut" controls crossorigin="anonymous"></audio>
                </div>
                <div class="action-area" style="margin-top:10px;">
                    <a id="dlSilenceWav" class="download-btn">SAVE WAV</a>
                    <a id="dlSilenceMp3" class="download-btn download-btn-mp3">SAVE MP3</a>
                </div>
            </div>
        </div>

        <div id="tab-enhance" class="tab-content">
            <h2>Lexis Enhancer Pro</h2>
            <p class="subtitle">Target: V-Shape EQ (Bass/Treble Boost)</p>
            <div class="file-upload-wrapper">
                <label>Input Source File (MP3/WAV)</label>
                <input id="fileEnhance" type="file" accept="audio/*" />
            </div>

            <div id="enhanceOriginalSection" style="display:none;">
                <h4>Original Audio (Before)</h4>
                <div class="visualizer-container">
                    <audio id="audioEnhanceIn" controls crossorigin="anonymous"></audio>
                </div>
            </div>

            <div class="controls-grid" style="margin-top:20px;">
                <div class="input-box">
                    <label>Preset Style</label>
                    <select id="enhanceType">
                        <option value="lexis" selected>Lexis Default (V-Shape)</option>
                        <option value="voice">Voice Only (Vocal Boost)</option>
                        <option value="flat">Flat (Compression Only)</option>
                    </select>
                    <small>EQ Config: +9dB Bass/Treble</small>
                </div>
                <div class="input-box">
                    <label>Intensity</label>
                    <select id="enhanceIntensity">
                        <option value="0.8">Soft</option>
                        <option value="1.0" selected>Standard (Default)</option>
                        <option value="1.2">Strong</option>
                    </select>
                    <small>Signal Processing Strength</small>
                </div>
            </div>
            <div class="action-area">
                <button id="processEnhance">ENGAGE ENHANCER</button>
            </div>
            <div id="logEnhance" class="log-box"><small>> AWAITING INPUT...</small></div>
            
            <div id="enhanceResultSection" class="result-section">
                <h4>Processed Voice (Result)</h4>
                <div class="visualizer-container">
                    <canvas id="canvasEnhance"></canvas>
                    <audio id="audioEnhanceOut" controls crossorigin="anonymous"></audio>
                </div>
                <div class="action-area" style="margin-top:10px;">
                    <a id="dlEnhanceWav" class="download-btn">SAVE WAV</a>
                    <a id="dlEnhanceMp3" class="download-btn download-btn-mp3">SAVE MP3</a>
                </div>
            </div>
        </div>

    </div>
  </main>

  <!-- BOTTOM AD START -->
  <div class="ad-container">
    <iframe class="ad-frame"
      title="Advertisement"
      width="468" 
      height="60" 
      frameborder="0" 
      scrolling="no"
      sandbox="allow-scripts allow-same-origin allow-popups"
      srcdoc="
        <html>
        <body style='margin:0;padding:0;background:transparent;display:flex;justify-content:center;align-items:center;'>
          <script type='text/javascript'>
            atOptions = {
              'key' : '0687be625f914b80ea92d3d54a2618ce',
              'format' : 'iframe',
              'height' : 60,
              'width' : 468,
              'params' : {}
            };
          </script>
          <script type='text/javascript' src='//www.highperformanceformat.com/0687be625f914b80ea92d3d54a2618ce/invoke.js'></script>
        </body>
        </html>
      ">
    </iframe>
  </div>
  <!-- BOTTOM AD END -->

  <article class="seo-content">
    <h2>Best Free Online Silence Remover and Audio Enhancer</h2>
    <p>Welcome to <strong>Audio Tool Pro</strong>. If you are looking for an <strong>Ai silence remove website</strong>, you have found the right place. Our tools run locally in your browser for maximum privacy.</p>
    <ul>
        <li><strong>Audio silence part remove:</strong> Use our smart algorithm to automatically find and remove silence parts.</li>
        <li><strong>Best silent part remove:</strong> We provide the best silent part remove experience with instant previews.</li>
        <li><strong>Free silence remove website:</strong> This tool is 100% free forever. No upload limits.</li>
        <li><strong>Lexis Style Enhancer:</strong> Apply professional EQ and Compression in one click.</li>
    </ul>
    <p>Whether you need to perform an <strong>audio silenc part remove</strong> or just enhance quality, our AI-powered tools help you achieve studio results instantly.</p>
  </article>

  <!-- BOTTOM SCRIPT MOVED HERE -->
  <script async="async" data-cfasync="false" src="https://pl28294546.effectivegatecpm.com/1dce27edec2a3fa40fc3c1ae0f45236a/invoke.js"></script>
  <div id="container-1dce27edec2a3fa40fc3c1ae0f45236a"></div>
  <!-- END BOTTOM SCRIPT -->

<script>
async function readFileAsArrayBuffer(file){
  return await file.arrayBuffer();
}
function encodeWAV(buffers, sampleRate){
  const numChannels = buffers.length;
  const length = buffers[0].length;
  const buffer = new ArrayBuffer(44 + length * numChannels * 2);
  const view = new DataView(buffer);
  function writeString(view, offset, string){ for(let i=0;i<string.length;i++) view.setUint8(offset+i,string.charCodeAt(i)); }
  writeString(view,0,'RIFF');
  view.setUint32(4,36 + length * numChannels * 2,true);
  writeString(view,8,'WAVE');
  writeString(view,12,'fmt ');
  view.setUint32(16,16,true);
  view.setUint16(20,1,true);
  view.setUint16(22,numChannels,true);
  view.setUint32(24,sampleRate,true);
  view.setUint32(28,sampleRate * numChannels * 2,true);
  view.setUint16(32,numChannels * 2,true);
  view.setUint16(34,16,true);
  writeString(view,36,'data');
  view.setUint32(40,length * numChannels * 2,true);
  let offset = 44;
  for(let i=0;i<length;i++){
    for(let ch=0; ch<numChannels; ch++){
      let s = Math.max(-1, Math.min(1, buffers[ch][i]));
      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
      offset += 2;
    }
  }
  return new Blob([view], {type:'audio/wav'});
}
function encodeMP3(channels, sampleRate) {
  if (!window.lamejs) return null;
  const mp3encoder = new lamejs.Mp3Encoder(channels.length, sampleRate, 128);
  const mp3Data = [];
  const left = channels[0];
  const right = channels.length > 1 ? channels[1] : channels[0];
  const samples = left.length;
  const sampleBlockSize = 1152; 
  const leftInt = new Int16Array(samples);
  const rightInt = new Int16Array(samples);
  for (let i = 0; i < samples; i++) {
    leftInt[i] = Math.max(-1, Math.min(1, left[i])) * 32767;
    rightInt[i] = Math.max(-1, Math.min(1, right[i])) * 32767;
  }
  for (let i = 0; i < samples; i += sampleBlockSize) {
    const leftChunk = leftInt.subarray(i, i + sampleBlockSize);
    const rightChunk = rightInt.subarray(i, i + sampleBlockSize);
    const mp3buf = mp3encoder.encodeBuffer(leftChunk, rightChunk);
    if (mp3buf.length > 0) mp3Data.push(mp3buf);
  }
  const mp3buf = mp3encoder.flush();
  if (mp3buf.length > 0) mp3Data.push(mp3buf);
  return new Blob(mp3Data, { type: 'audio/mp3' });
}
let audioCtx; 
function setupVisualizer(audioElement, canvasId) {
  const canvas = document.getElementById(canvasId);
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.scale(dpr, dpr);
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const analyser = audioCtx.createAnalyser();
  analyser.fftSize = 256; 
  try {
      const source = audioCtx.createMediaElementSource(audioElement);
      source.connect(analyser);
      analyser.connect(audioCtx.destination);
  } catch(e) {}
  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);
  function draw() {
    requestAnimationFrame(draw);
    analyser.getByteFrequencyData(dataArray);
    ctx.clearRect(0, 0, rect.width, rect.height);
    const barWidth = (rect.width / bufferLength) * 2.5;
    let barHeight;
    let x = 0;
    for(let i = 0; i < bufferLength; i++) {
      barHeight = dataArray[i] / 2; 
      const gradient = ctx.createLinearGradient(0, rect.height, 0, 0);
      gradient.addColorStop(0, '#00f3ff'); 
      gradient.addColorStop(1, '#bc13fe'); 
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.roundRect(x, rect.height - barHeight, barWidth, barHeight, 5);
      ctx.fill();
      x += barWidth + 2; 
    }
  }
  draw();
}
function switchTab(tab) {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    document.querySelector(`#tab-${tab}`).classList.add('active');
    event.target.classList.add('active');
    if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
}
const fileSilence = document.getElementById('fileSilence');
const processSilenceBtn = document.getElementById('processSilence');
const logSilence = document.getElementById('logSilence');
const audioSilenceOut = document.getElementById('audioSilenceOut');
const audioSilenceIn = document.getElementById('audioSilenceIn');
const silenceOriginalSection = document.getElementById('silenceOriginalSection');
const silenceResultSection = document.getElementById('silenceResultSection');
let silenceFileName = "Audio";
fileSilence.addEventListener('change', ()=>{
    const f = fileSilence.files[0];
    if(!f) return;
    silenceFileName = f.name.replace(/\.[^/.]+$/, "");
    audioSilenceIn.src = URL.createObjectURL(f);
    silenceOriginalSection.style.display = 'block';
    logSilence.innerHTML = '<small style="color:#00f3ff">> SOURCE FILE LOADED.</small>';
    silenceResultSection.style.display = 'none';
});
processSilenceBtn.addEventListener('click', async ()=>{
    const f = fileSilence.files[0];
    if(!f){ alert('Please upload a file.'); return; }
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    processSilenceBtn.disabled=true; processSilenceBtn.textContent='PROCESSING...';
    try {
        const ab = await readFileAsArrayBuffer(f);
        const decoded = await audioCtx.decodeAudioData(ab.slice(0));
        const minSilenceSec = parseFloat(document.getElementById('minSilence').value);
        const rmsThresh = parseFloat(document.getElementById('threshold').value);
        const sr = decoded.sampleRate;
        const channelData = [];
        for(let c=0;c<decoded.numberOfChannels;c++) channelData.push(decoded.getChannelData(c));
        const frameMs = 10;
        const frameLen = Math.floor(sr*(frameMs/1000));
        const minFrames = Math.max(1, Math.floor((minSilenceSec*1000)/frameMs));
        function getRms(b,s,e){let sum=0;let cnt=0;for(let i=s;i<e;i++){sum+=b[i]*b[i];cnt++;}return Math.sqrt(sum/Math.max(cnt,1));}
        const frames=[];
        for(let i=0;i<channelData[0].length;i+=frameLen){
            frames.push(getRms(channelData[0],i,Math.min(i+frameLen,channelData[0].length)));
        }
        const isSilent=frames.map(v=>v<rmsThresh);
        const ranges=[];
        let cur=0, fIdx=0;
        while(fIdx<isSilent.length){
            if(isSilent[fIdx]){
                let j=fIdx;
                while(j<isSilent.length && isSilent[j]) j++;
                if((j-fIdx)>=minFrames){
                    const silStart=fIdx*frameLen;
                    if(silStart>cur) ranges.push([cur, silStart]);
                    cur=j*frameLen;
                }
                fIdx=j;
            }else{fIdx++;}
        }
        if(cur<channelData[0].length) ranges.push([cur, channelData[0].length]);
        let totalLen=0;
        ranges.forEach(r=>totalLen+=(r[1]-r[0]));
        const outCh=[];
        for(let c=0;c<channelData.length;c++) outCh.push(new Float32Array(totalLen));
        let wPos=0;
        ranges.forEach(r=>{
            const l=r[1]-r[0];
            for(let c=0;c<channelData.length;c++) outCh[c].set(channelData[c].subarray(r[0],r[1]), wPos);
            wPos+=l;
        });
        const wav = encodeWAV(outCh, sr);
        const url = URL.createObjectURL(wav);
        silenceResultSection.style.display = 'block';
        audioSilenceOut.src=url;
        setupVisualizer(audioSilenceOut, 'canvasSilence');
        const dlWav = document.getElementById('dlSilenceWav');
        dlWav.href=url; dlWav.download = `${silenceFileName}_Cleaned.wav`; dlWav.style.display='inline-flex';
        if(window.lamejs){
             const mp3 = encodeMP3(outCh, sr);
             if(mp3){
                 const mUrl = URL.createObjectURL(mp3);
                 const dlMp3 = document.getElementById('dlSilenceMp3');
                 dlMp3.href=mUrl; dlMp3.download=`${silenceFileName}_Cleaned.mp3`; dlMp3.style.display='inline-flex';
             }
        }
        logSilence.innerHTML += `<br><small style="color:#00f3ff">> SUCCESS.</small>`;
    } catch(e) { logSilence.innerHTML += `<br><small style="color:#ef4444">// ERROR: ${e.message}</small>`; }
    processSilenceBtn.disabled=false; processSilenceBtn.textContent='INITIALIZE CUT';
});
const fileEnhance = document.getElementById('fileEnhance');
const processEnhanceBtn = document.getElementById('processEnhance');
const logEnhance = document.getElementById('logEnhance');
const audioEnhanceOut = document.getElementById('audioEnhanceOut');
const audioEnhanceIn = document.getElementById('audioEnhanceIn');
const enhanceOriginalSection = document.getElementById('enhanceOriginalSection');
const enhanceResultSection = document.getElementById('enhanceResultSection');
let enhanceFileName = "Audio";
fileEnhance.addEventListener('change', ()=>{
    const f = fileEnhance.files[0];
    if(!f) return;
    enhanceFileName = f.name.replace(/\.[^/.]+$/, "");
    audioEnhanceIn.src = URL.createObjectURL(f);
    enhanceOriginalSection.style.display = 'block';
    logEnhance.innerHTML = '<small style="color:#00f3ff">> AUDIO BUFFERED.</small>';
    enhanceResultSection.style.display = 'none';
});
processEnhanceBtn.addEventListener('click', async ()=>{
    const f = fileEnhance.files[0];
    if(!f){ alert('Please upload a file.'); return; }
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    processEnhanceBtn.disabled=true; processEnhanceBtn.textContent='ENHANCING...';
    try {
        const ab = await readFileAsArrayBuffer(f);
        const decoded = await audioCtx.decodeAudioData(ab.slice(0));
        const type = document.getElementById('enhanceType').value;
        const intensity = parseFloat(document.getElementById('enhanceIntensity').value);
        const offlineCtx = new OfflineAudioContext(decoded.numberOfChannels, decoded.length, decoded.sampleRate);
        const source = offlineCtx.createBufferSource();
        source.buffer = decoded;
        let currentNode = source;
        function addFilter(freq, gain, type='peaking', Q=1.0){
            const node = offlineCtx.createBiquadFilter();
            node.type = type;
            node.frequency.value = freq;
            node.gain.value = gain * intensity;
            node.Q.value = Q;
            currentNode.connect(node);
            currentNode = node;
        }
        if(type === 'lexis') {
            addFilter(32, 9.0, 'lowshelf');
            addFilter(62, 5.0, 'peaking');  
            addFilter(125, 2.0, 'peaking'); 
            addFilter(8000, 4.0, 'peaking');  
            addFilter(16000, 9.0, 'highshelf');
        } else if(type === 'voice') {
            addFilter(80, -10.0, 'highpass'); 
            addFilter(3000, 4.0); 
        }
        const compressor = offlineCtx.createDynamicsCompressor();
        compressor.threshold.value = -20;
        compressor.ratio.value = 4;
        currentNode.connect(compressor);
        currentNode = compressor;
        const gainNode = offlineCtx.createGain();
        gainNode.gain.value = 1.5; 
        currentNode.connect(gainNode);
        currentNode = gainNode;
        currentNode.connect(offlineCtx.destination);
        source.start();
        const renderedBuffer = await offlineCtx.startRendering();
        const outCh = [];
        for(let c=0;c<renderedBuffer.numberOfChannels;c++) outCh.push(renderedBuffer.getChannelData(c));
        const wav = encodeWAV(outCh, renderedBuffer.sampleRate);
        const url = URL.createObjectURL(wav);
        enhanceResultSection.style.display = 'block';
        audioEnhanceOut.src=url;
        setupVisualizer(audioEnhanceOut, 'canvasEnhance');
        const dlWav = document.getElementById('dlEnhanceWav');
        dlWav.href=url; dlWav.download = `${enhanceFileName}_LexisEnhance.wav`; dlWav.style.display='inline-flex';
        if(window.lamejs){
             const mp3 = encodeMP3(outCh, renderedBuffer.sampleRate);
             if(mp3){
                 const mUrl = URL.createObjectURL(mp3);
                 const dlMp3 = document.getElementById('dlEnhanceMp3');
                 dlMp3.href=mUrl; dlMp3.download=`${enhanceFileName}_LexisEnhance.mp3`; dlMp3.style.display='inline-flex';
             }
        }
        logEnhance.innerHTML += `<br><small style="color:#00f3ff">> ENHANCEMENT COMPLETE.</small>`;
    } catch(e) { logEnhance.innerHTML += `<br><small style="color:#ef4444">// ERROR: ${e.message}</small>`; }
    processEnhanceBtn.disabled=false; processEnhanceBtn.textContent='ENGAGE ENHANCER';
});
</script>
</body>
</html>

